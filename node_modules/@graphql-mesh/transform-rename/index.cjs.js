'use strict';

const wrap = require('@graphql-tools/wrap');
const utils = require('@graphql-tools/utils');

class RenameTransform {
    constructor(options) {
        this.transforms = [];
        const { config } = options;
        for (const change of config) {
            const [fromTypeName, fromFieldName] = change.from.split('.');
            const [toTypeName, toFieldName] = change.to.split('.');
            if (fromTypeName !== toTypeName) {
                this.transforms.push(new wrap.RenameRootTypes(t => (t === fromTypeName ? toTypeName : t)));
                this.transforms.push(new wrap.RenameTypes(t => (t === fromTypeName ? toTypeName : t)));
            }
            if (fromFieldName && toFieldName && fromFieldName !== toFieldName) {
                this.transforms.push(new wrap.RenameRootFields((typeName, fieldName) => typeName === toTypeName && fieldName === fromFieldName ? toFieldName : fieldName));
                this.transforms.push(new wrap.RenameObjectFields((typeName, fieldName) => typeName === toTypeName && fieldName === fromFieldName ? toFieldName : fieldName));
                this.transforms.push(new wrap.RenameInputObjectFields((typeName, fieldName) => typeName === toTypeName && fieldName === fromFieldName ? toFieldName : fieldName));
            }
        }
    }
    transformSchema(schema) {
        return utils.applySchemaTransforms(schema, this.transforms);
    }
    transformRequest(request) {
        return utils.applyRequestTransforms(request, this.transforms);
    }
    transformResult(result) {
        return utils.applyResultTransforms(result, this.transforms);
    }
}

module.exports = RenameTransform;
//# sourceMappingURL=index.cjs.js.map
